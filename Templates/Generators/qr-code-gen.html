<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>QR Code Generator</title>
<link rel="icon" type="image/x-icon" href="/images/MultiTools.jpg" />
<meta name="theme-color" content="#45a049" />
<link rel="manifest" href="/manifest.json" />

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" />
<!-- QR Code Styling library -->
<script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>

<style>
:root {
  --primary: #45a049;
  --secondary: #24272b;
  --accent: #222325;
  --glass: rgba(36, 39, 43, 0.7);
  --hover: #38a049;
  --text-light: #fff;
  --text-dark: #111;
  --radius: 13px;
  --soft-shadow: 0 5px 21px rgba(0,0,0,0.14);
}

body {
  margin: 0;
  font-family: 'Segoe UI', Arial, sans-serif;
  background: linear-gradient(135deg, #202622 0%, #272e21 100%);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.main-container {
  display: flex;
  flex-direction: column;
  border-radius: var(--radius);
  box-shadow: var(--soft-shadow);
  width: 63%;
  max-width: 933px;
  background: var(--accent);
  backdrop-filter: blur(5px);
  overflow: hidden;
}

.header {
  background: var(--primary);
  padding: 19px 0 16px 0;
  text-align: center;
  font-size: 1.5rem;
  color: var(--text-light);
  font-weight: bold;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 11px;
  letter-spacing: 0.5px;
  border-bottom-left-radius: var(--radius);
  border-bottom-right-radius: var(--radius);
  box-shadow: 0 2px 8px rgba(69,160,73,0.11);
}

.container {
  display: flex;
  padding: 19px;
  gap: 18px;
  justify-content: space-between;
}

.controls {
  flex: 1 1 233px;
  background: var(--glass);
  border-radius: var(--radius);
  padding: 16px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 13px;
  box-shadow: var(--soft-shadow);
  min-width: 213px;
  max-width: 320px;
}

.controls label {
  color: var(--text-light);
  font-size: 0.61rem;
  margin-bottom: 4px;
  letter-spacing: 0.2px;
  font-weight: 500;
}

.controls input, .controls select, .controls button {
  padding: 6.5px;
  border-radius: 7px;
  border: none;
  background: rgba(255,255,255,0.13);
  color: var(--text-light);
  font-size: 0.66rem;
  transition: background 0.2s;
  width: 98%;
  margin-bottom: 3px;
}

.controls input:focus, .controls select:focus {
  background: rgba(0,0,0,0.18);
  outline: 2px solid var(--primary);
}

.controls .color-input {
  height: 24px;
  width: 24px;
  border: none;
  cursor: pointer;
  background: rgba(255,255,255,0.20);
  box-shadow: 0 1px 2px rgba(0,0,0,0.07);
}

.controls button {
  background: var(--primary);
  color: var(--text-light);
  font-weight: bold;
  margin-top: 0;
  margin-bottom: 0;
  box-shadow: 0 1px 4px rgba(69,160,73,0.10);
  cursor: pointer;
  min-height: 24px;
}

.controls button:hover {
  background: var(--hover);
}

.controls input[type="checkbox"] {
  accent-color: var(--primary);
  height: 12px;
  width: 12px;
  cursor: pointer;
  margin-right: 3px;
}

input[type='file'] {
  background: transparent;
  padding: 5px 0;
  color-scheme: dark;
}

.preview {
  flex: 2 1 333px;
  background: var(--glass);
  padding: 24px;
  border-radius: var(--radius);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--soft-shadow);
  min-width: 233px;
}

#qr-code {
  background: white;
  padding: 16px;
  border-radius: var(--radius);
  transition: transform 0.3s ease;
  box-shadow: 0 4px 19px rgba(50,80,50,0.16);
  min-width: 153px;
  max-width: 293px;
}

#qr-code:hover {
  transform: scale(1.03);
}

.logo-preview {
  width: 33px;
  height: 33px;
  object-fit: contain;
  border-radius: 6px;
  border: 1px solid #ccc;
}

@media (max-width: 1000px) {
  .container {
    flex-direction: column;
    align-items: center;
    gap: 13px;
    padding: 11px;
  }
  .controls, .preview {
    width: 100%;
    min-width: unset;
    max-width: 433px;
    padding: 13px;
  }
  .main-container {
    width: 66vw;
    max-width: 99vw;
  }
}


/* Tablet and smaller desktops */
@media (max-width: 1000px) {
  .container {
    flex-direction: column;
    align-items: center;
    gap: 13px;
    padding: 11px;
  }
  .controls, .preview {
    width: 100%;
    max-width: 433px;
    padding: 13px;
  }
  .main-container {
    width: 66vw;
    max-width: 99vw;
  }
}

/* Phones */
@media (max-width: 600px) {
  body {
    font-size: 14px;
  }
  .main-container {
    width: 95vw;
    max-width: 100%;
  }
  .container {
    flex-direction: column;
    padding: 10px;
    gap: 10px;
  }
  .controls {
    grid-template-columns: 1fr;
    row-gap: 15px;
    min-width: unset;
    max-width: none;
    padding: 12px;
  }
  .controls input, .controls select, .controls button {
    font-size: 1rem;
    padding: 12px;
    width: 100%;
  }
  .controls button {
    min-height: 44px;
  }
  .preview {
    width: 100%;
    padding: 20px;
    min-width: unset;
  }
}
::-webkit-scrollbar { width: 5px; border-radius:7px; background:rgba(68,90,68,0.06);}
::-webkit-scrollbar-thumb { background:rgba(69,160,73,0.13); border-radius:6px;}
</style>
</head>
<body>
<div class="main-container">
  <div class="header">
    <i class="fas fa-qrcode"></i>QR Code Generator
  </div>
  <div class="container">
    <div class="controls">
      <div>
        <label for="content">Content</label>
        <input type="text" id="content" placeholder="Enter URL">
      </div>
      <div>
        <label for="qr-size">Size</label>
        <input type="number" id="qr-size" value="300" min="50" max="800">
      </div>
      <div>
        <label for="shape">Dot Shape</label>
        <select id="shape">
          <option value="square">Square</option>
          <option value="dots">Dots</option>
          <option value="rounded">Rounded</option>
          <option value="extra-rounded">Extra Rounded</option>
          <option value="classy">Classy</option>
        </select>
      </div>
      <div>
        <label for="gradient-type">Gradient Type</label>
        <select id="gradient-type">
          <option value="linear">Linear</option>
          <option value="radial">Radial</option>
        </select>
      </div>
      <div>
        <label for="gradient-from">Gradient From</label>
        <input type="color" id="gradient-from" class="color-input" value="#000000">
      </div>
      <div>
        <label for="gradient-to">Gradient To</label>
        <input type="color" id="gradient-to" class="color-input" value="#45a049">
      </div>
      <div>
        <label for="qr-color">QR Color</label>
        <input type="color" id="qr-color" class="color-input" value="#000000">
      </div>
      <div>
        <label for="bg-color">Background</label>
        <input type="color" id="bg-color" class="color-input" value="#ffffff">
      </div>
      <div>
        <label for="transparent-bg">
          <input type="checkbox" id="transparent-bg"> Transparent Background
        </label>
      </div>
      <div>
        <label for="logo">Upload Logo</label>
        <input type="file" id="logo" accept="image/*">
      </div>
      <div>
        <button id="gradient-toggle-btn">Use Gradient: On</button>
      </div>
      <div>
        <button id="reset">Reset</button>
      </div>
      <div>
        <button id="download">Download</button>
      </div>
      <div>
        <button class="back-button" onclick="window.history.back()">Back</button>
      </div>
    </div>
    <div class="preview">
      <div id="qr-code"></div>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
let useGradient = true;
let logoData = "";

const qrCode = new QRCodeStyling({
  width: 300,
  height: 300,
  type: "canvas",
  data: "Hello World",
  dotsOptions: { color: "#000000", type: "square" },
  backgroundOptions: { color: "#ffffff" },
});

qrCode.append(document.getElementById("qr-code"));

function updateQRCode() {
  const content = $('#content').val() || "Hello World";
  const size = parseInt($('#qr-size').val()) || 300;
  const shape = $('#shape').val();
  const qrColor = $('#qr-color').val();
  const bgColor = $('#bg-color').val();
  const gradientFrom = $('#gradient-from').val();
  const gradientTo = $('#gradient-to').val();
  const gradientType = $('#gradient-type').val();
  const transparent = $('#transparent-bg').is(":checked");
  const logoSelect = $('#logo-select').val();
  const frameStyle = $('#frame-style').val();

  let dotsOptions = { type: shape };
  if (useGradient) {
    dotsOptions.gradient = {
      type: gradientType,
      rotation: 0,
      colorStops: [
        { offset: 0, color: gradientFrom },
        { offset: 1, color: gradientTo }
      ]
    };
    dotsOptions.color = undefined;
  } else {
    dotsOptions.gradient = undefined;
    dotsOptions.color = qrColor;
  }

  qrCode.update({
    width: size,
    height: size,
    data: content,
    dotsOptions,
    backgroundOptions: { color: transparent ? "transparent" : bgColor },
    image: logoData || null,
    imageOptions: { crossOrigin: "anonymous", margin: 5 }
  });
}

$(document).ready(function () {
  $('#content,#qr-size,#shape,#qr-color,#bg-color,#gradient-from,#gradient-to,#gradient-type,#transparent-bg,#frame-style').on('input change', updateQRCode);

  $('#gradient-toggle-btn').click(function () {
    useGradient = !useGradient;
    $(this).text(`Use Gradient: ${useGradient ? "On" : "Off"}`);
    updateQRCode();
  });

  $('#reset').click(function () {
    $('#content').val('');
    $('#qr-size').val(300);
    $('#gradient-from').val('#000000');
    $('#gradient-to').val('#45a049');
    $('#qr-color').val('#000000');
    $('#bg-color').val('#ffffff');
    $('#transparent-bg').prop("checked", false);
    $('#logo').val('');
    $('#logo-select').val('');
    $('#frame-style').val('none');
    useGradient = true;
    $('#gradient-toggle-btn').text('Use Gradient: On');
    logoData = "";
    updateQRCode();
  });

  $('#logo').change(function () {
    const file = this.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        logoData = e.target.result;
        updateQRCode();
      };
      reader.readAsDataURL(file);
    }
  });

  $('#logo-select').change(function () {
    const val = $(this).val();
    if (val) {
      logoData = `/logos/${val}.png`;
    } else {
      logoData = "";
    }
    updateQRCode();
  });

  $('#download').click(function () {
    qrCode.download({ name: "qr-code", extension: "png" });
  });

  updateQRCode();
});
</script>
</body>
</html>
